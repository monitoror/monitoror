#!/usr/bin/env bash
#
# Build a static binary for current OS/ARCH
#

set -eu -o pipefail

source ./scripts/.variables

export CGO_ENABLED=0
export GOGC=off

TARGET="builds/monitoror-$GOOS-$GOARCH"
if [[ $GOOS = "windows" ]]
then
	TARGET="$TARGET.exe"
fi

echo "Building statically linked $TARGET"
go build -o "${TARGET}" --ldflags "${LDFLAGS}" "${SOURCE}"
